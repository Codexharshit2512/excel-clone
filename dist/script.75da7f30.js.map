{"version":3,"sources":["../src/lib/css.js","../src/lib/dom.js","../src/lib/class-names.js","../src/lib/event-manager.js","../src/process-scroll-diff.js","../src/lib/util.js","../src/update-geometry.js","../src/handlers/click-rail.js","../src/handlers/drag-thumb.js","../src/handlers/keyboard.js","../src/handlers/mouse-wheel.js","../src/handlers/touch.js","../src/index.js","script.js","node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["const","let","this","processScrollDiff","DOM.matches","CSS.get","DOM.queryChildren","DOM.remove","CSS.set","DOM.div","ps","PerfectScrollbar","wheelSpeed","wheelPropagation","defaultProperties","text","bold","italic","underlined","alignment","color","bgcolor","formula","upStream","downStream","i","str","n","rem","Math","floor","String","fromCharCode","$","append","cellData","sheets","Sheet1","saved","selectedSheet","totalSheets","lastSheetAdded","sheetSelectedForSomeAction","row","j","getRowColId","elem","classArr","attr","split","rowId","parseInt","colId","grabAdjacentCells","topCell","bottomCell","leftCell","rightCell","on","e","console","log","hasClass","ctrlKey","unselectCells","selectCell","dblclick","focus","blur","updateCellData","getSelectedBooleans","topSelected","rightSelected","bottomSelected","leftSelected","cell","addClass","removeClass","changeHeader","startCellSelected","startCell","endCell","mousemove","preventDefault","buttons","mouseenter","selectBetweenCell","start","end","min","max","data","rest","setHeaderStyle","css","val","id","property","click","align","toggleClass","scroll","scrollLeft","scrollTop","colorPick","initialColor","allowRecent","recentMax","allowCustomColor","palette","onColorSelected","element","children","addSheetListeners","emptyPreviousSheet","scrollIntoView","behaviour","loadNewSheet","selectSheet","remove","left","pageX","handleRenameSheet","handleDeleteSheet","rowKeys","Object","keys","colKeys","modal","includes","copySheets","forEach","sheet","each","index","deletedSheet","length","idx","indexOf","change","value","num","oldCellData","JSON","stringify","undefined","fileModal","stopPropagation","stopImmediatePropagation","openFile","sureModal","saveFile","openNewFile","newClicked","saveModal","a","document","createElement","href","encodeURIComponent","download","inputFile","file","target","files","name","reader","FileReader","readAsText","onload","parse","result","lastlyAddedSheet","splittedSheetArray","isNaN","clipBoard","contentCutted","col","sCell","rows","cols","rowDiff","colDiff","splitArr","elements","replace","push","updateStream","alert","selfCode","OVERLAY_ID","OldModule","module","bundle","Module","moduleName","call","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","fn","dispose","checkedAssets","assetsToAccept","parent","isParcelRequire","WebSocket","hostname","location","protocol","ws","onmessage","event","type","handled","assets","asset","isNew","didAccept","hmrAcceptCheck","global","parcelRequire","every","generated","js","clear","hmrApply","v","hmrAcceptRun","reload","close","onclose","removeErrorOverlay","error","message","stack","overlay","createErrorOverlay","body","appendChild","getElementById","stackTrace","innerText","innerHTML","getParents","modules","parents","k","d","dep","Array","isArray","concat","Function","deps","cached","cache","some","cb"],"mappings":"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","file":"script.75da7f30.js","sourceRoot":"..","sourcesContent":["export function get(element) {\n  return getComputedStyle(element);\n}\n\nexport function set(element, obj) {\n  for (const key in obj) {\n    let val = obj[key];\n    if (typeof val === 'number') {\n      val = `${val}px`;\n    }\n    element.style[key] = val;\n  }\n  return element;\n}\n","export function div(className) {\n  const div = document.createElement('div');\n  div.className = className;\n  return div;\n}\n\nconst elMatches =\n  typeof Element !== 'undefined' &&\n  (Element.prototype.matches ||\n    Element.prototype.webkitMatchesSelector ||\n    Element.prototype.mozMatchesSelector ||\n    Element.prototype.msMatchesSelector);\n\nexport function matches(element, query) {\n  if (!elMatches) {\n    throw new Error('No element matching method supported');\n  }\n\n  return elMatches.call(element, query);\n}\n\nexport function remove(element) {\n  if (element.remove) {\n    element.remove();\n  } else {\n    if (element.parentNode) {\n      element.parentNode.removeChild(element);\n    }\n  }\n}\n\nexport function queryChildren(element, selector) {\n  return Array.prototype.filter.call(element.children, child =>\n    matches(child, selector)\n  );\n}\n","const cls = {\n  main: 'ps',\n  rtl: 'ps__rtl',\n  element: {\n    thumb: x => `ps__thumb-${x}`,\n    rail: x => `ps__rail-${x}`,\n    consuming: 'ps__child--consume',\n  },\n  state: {\n    focus: 'ps--focus',\n    clicking: 'ps--clicking',\n    active: x => `ps--active-${x}`,\n    scrolling: x => `ps--scrolling-${x}`,\n  },\n};\n\nexport default cls;\n\n/*\n * Helper methods\n */\nconst scrollingClassTimeout = { x: null, y: null };\n\nexport function addScrollingClass(i, x) {\n  const classList = i.element.classList;\n  const className = cls.state.scrolling(x);\n\n  if (classList.contains(className)) {\n    clearTimeout(scrollingClassTimeout[x]);\n  } else {\n    classList.add(className);\n  }\n}\n\nexport function removeScrollingClass(i, x) {\n  scrollingClassTimeout[x] = setTimeout(\n    () => i.isAlive && i.element.classList.remove(cls.state.scrolling(x)),\n    i.settings.scrollingThreshold\n  );\n}\n\nexport function setScrollingClassInstantly(i, x) {\n  addScrollingClass(i, x);\n  removeScrollingClass(i, x);\n}\n","class EventElement {\n  constructor(element) {\n    this.element = element;\n    this.handlers = {};\n  }\n\n  bind(eventName, handler) {\n    if (typeof this.handlers[eventName] === 'undefined') {\n      this.handlers[eventName] = [];\n    }\n    this.handlers[eventName].push(handler);\n    this.element.addEventListener(eventName, handler, false);\n  }\n\n  unbind(eventName, target) {\n    this.handlers[eventName] = this.handlers[eventName].filter(handler => {\n      if (target && handler !== target) {\n        return true;\n      }\n      this.element.removeEventListener(eventName, handler, false);\n      return false;\n    });\n  }\n\n  unbindAll() {\n    for (const name in this.handlers) {\n      this.unbind(name);\n    }\n  }\n\n  get isEmpty() {\n    return Object.keys(this.handlers).every(\n      key => this.handlers[key].length === 0\n    );\n  }\n}\n\nexport default class EventManager {\n  constructor() {\n    this.eventElements = [];\n  }\n\n  eventElement(element) {\n    let ee = this.eventElements.filter(ee => ee.element === element)[0];\n    if (!ee) {\n      ee = new EventElement(element);\n      this.eventElements.push(ee);\n    }\n    return ee;\n  }\n\n  bind(element, eventName, handler) {\n    this.eventElement(element).bind(eventName, handler);\n  }\n\n  unbind(element, eventName, handler) {\n    const ee = this.eventElement(element);\n    ee.unbind(eventName, handler);\n\n    if (ee.isEmpty) {\n      // remove\n      this.eventElements.splice(this.eventElements.indexOf(ee), 1);\n    }\n  }\n\n  unbindAll() {\n    this.eventElements.forEach(e => e.unbindAll());\n    this.eventElements = [];\n  }\n\n  once(element, eventName, handler) {\n    const ee = this.eventElement(element);\n    const onceHandler = evt => {\n      ee.unbind(eventName, onceHandler);\n      handler(evt);\n    };\n    ee.bind(eventName, onceHandler);\n  }\n}\n","import { setScrollingClassInstantly } from './lib/class-names';\n\nfunction createEvent(name) {\n  if (typeof window.CustomEvent === 'function') {\n    return new CustomEvent(name);\n  } else {\n    const evt = document.createEvent('CustomEvent');\n    evt.initCustomEvent(name, false, false, undefined);\n    return evt;\n  }\n}\n\nexport default function(\n  i,\n  axis,\n  diff,\n  useScrollingClass = true,\n  forceFireReachEvent = false\n) {\n  let fields;\n  if (axis === 'top') {\n    fields = [\n      'contentHeight',\n      'containerHeight',\n      'scrollTop',\n      'y',\n      'up',\n      'down',\n    ];\n  } else if (axis === 'left') {\n    fields = [\n      'contentWidth',\n      'containerWidth',\n      'scrollLeft',\n      'x',\n      'left',\n      'right',\n    ];\n  } else {\n    throw new Error('A proper axis should be provided');\n  }\n\n  processScrollDiff(i, diff, fields, useScrollingClass, forceFireReachEvent);\n}\n\nfunction processScrollDiff(\n  i,\n  diff,\n  [contentHeight, containerHeight, scrollTop, y, up, down],\n  useScrollingClass = true,\n  forceFireReachEvent = false\n) {\n  const element = i.element;\n\n  // reset reach\n  i.reach[y] = null;\n\n  // 1 for subpixel rounding\n  if (element[scrollTop] < 1) {\n    i.reach[y] = 'start';\n  }\n\n  // 1 for subpixel rounding\n  if (element[scrollTop] > i[contentHeight] - i[containerHeight] - 1) {\n    i.reach[y] = 'end';\n  }\n\n  if (diff) {\n    element.dispatchEvent(createEvent(`ps-scroll-${y}`));\n\n    if (diff < 0) {\n      element.dispatchEvent(createEvent(`ps-scroll-${up}`));\n    } else if (diff > 0) {\n      element.dispatchEvent(createEvent(`ps-scroll-${down}`));\n    }\n\n    if (useScrollingClass) {\n      setScrollingClassInstantly(i, y);\n    }\n  }\n\n  if (i.reach[y] && (diff || forceFireReachEvent)) {\n    element.dispatchEvent(createEvent(`ps-${y}-reach-${i.reach[y]}`));\n  }\n}\n","import * as CSS from './css';\nimport * as DOM from './dom';\n\nexport function toInt(x) {\n  return parseInt(x, 10) || 0;\n}\n\nexport function isEditable(el) {\n  return (\n    DOM.matches(el, 'input,[contenteditable]') ||\n    DOM.matches(el, 'select,[contenteditable]') ||\n    DOM.matches(el, 'textarea,[contenteditable]') ||\n    DOM.matches(el, 'button,[contenteditable]')\n  );\n}\n\nexport function outerWidth(element) {\n  const styles = CSS.get(element);\n  return (\n    toInt(styles.width) +\n    toInt(styles.paddingLeft) +\n    toInt(styles.paddingRight) +\n    toInt(styles.borderLeftWidth) +\n    toInt(styles.borderRightWidth)\n  );\n}\n\nexport const env = {\n  isWebKit:\n    typeof document !== 'undefined' &&\n    'WebkitAppearance' in document.documentElement.style,\n  supportsTouch:\n    typeof window !== 'undefined' &&\n    ('ontouchstart' in window ||\n      ('maxTouchPoints' in window.navigator &&\n        window.navigator.maxTouchPoints > 0) ||\n      (window.DocumentTouch && document instanceof window.DocumentTouch)),\n  supportsIePointer:\n    typeof navigator !== 'undefined' && navigator.msMaxTouchPoints,\n  isChrome:\n    typeof navigator !== 'undefined' &&\n    /Chrome/i.test(navigator && navigator.userAgent),\n};\n","import * as CSS from './lib/css';\nimport * as DOM from './lib/dom';\nimport cls from './lib/class-names';\nimport { toInt } from './lib/util';\n\nexport default function(i) {\n  const element = i.element;\n  const roundedScrollTop = Math.floor(element.scrollTop);\n  const rect = element.getBoundingClientRect();\n\n  i.containerWidth = Math.ceil(rect.width);\n  i.containerHeight = Math.ceil(rect.height);\n  i.contentWidth = element.scrollWidth;\n  i.contentHeight = element.scrollHeight;\n\n  if (!element.contains(i.scrollbarXRail)) {\n    // clean up and append\n    DOM.queryChildren(element, cls.element.rail('x')).forEach(el =>\n      DOM.remove(el)\n    );\n    element.appendChild(i.scrollbarXRail);\n  }\n  if (!element.contains(i.scrollbarYRail)) {\n    // clean up and append\n    DOM.queryChildren(element, cls.element.rail('y')).forEach(el =>\n      DOM.remove(el)\n    );\n    element.appendChild(i.scrollbarYRail);\n  }\n\n  if (\n    !i.settings.suppressScrollX &&\n    i.containerWidth + i.settings.scrollXMarginOffset < i.contentWidth\n  ) {\n    i.scrollbarXActive = true;\n    i.railXWidth = i.containerWidth - i.railXMarginWidth;\n    i.railXRatio = i.containerWidth / i.railXWidth;\n    i.scrollbarXWidth = getThumbSize(\n      i,\n      toInt((i.railXWidth * i.containerWidth) / i.contentWidth)\n    );\n    i.scrollbarXLeft = toInt(\n      ((i.negativeScrollAdjustment + element.scrollLeft) *\n        (i.railXWidth - i.scrollbarXWidth)) /\n        (i.contentWidth - i.containerWidth)\n    );\n  } else {\n    i.scrollbarXActive = false;\n  }\n\n  if (\n    !i.settings.suppressScrollY &&\n    i.containerHeight + i.settings.scrollYMarginOffset < i.contentHeight\n  ) {\n    i.scrollbarYActive = true;\n    i.railYHeight = i.containerHeight - i.railYMarginHeight;\n    i.railYRatio = i.containerHeight / i.railYHeight;\n    i.scrollbarYHeight = getThumbSize(\n      i,\n      toInt((i.railYHeight * i.containerHeight) / i.contentHeight)\n    );\n    i.scrollbarYTop = toInt(\n      (roundedScrollTop * (i.railYHeight - i.scrollbarYHeight)) /\n        (i.contentHeight - i.containerHeight)\n    );\n  } else {\n    i.scrollbarYActive = false;\n  }\n\n  if (i.scrollbarXLeft >= i.railXWidth - i.scrollbarXWidth) {\n    i.scrollbarXLeft = i.railXWidth - i.scrollbarXWidth;\n  }\n  if (i.scrollbarYTop >= i.railYHeight - i.scrollbarYHeight) {\n    i.scrollbarYTop = i.railYHeight - i.scrollbarYHeight;\n  }\n\n  updateCss(element, i);\n\n  if (i.scrollbarXActive) {\n    element.classList.add(cls.state.active('x'));\n  } else {\n    element.classList.remove(cls.state.active('x'));\n    i.scrollbarXWidth = 0;\n    i.scrollbarXLeft = 0;\n    element.scrollLeft = i.isRtl === true ? i.contentWidth : 0;\n  }\n  if (i.scrollbarYActive) {\n    element.classList.add(cls.state.active('y'));\n  } else {\n    element.classList.remove(cls.state.active('y'));\n    i.scrollbarYHeight = 0;\n    i.scrollbarYTop = 0;\n    element.scrollTop = 0;\n  }\n}\n\nfunction getThumbSize(i, thumbSize) {\n  if (i.settings.minScrollbarLength) {\n    thumbSize = Math.max(thumbSize, i.settings.minScrollbarLength);\n  }\n  if (i.settings.maxScrollbarLength) {\n    thumbSize = Math.min(thumbSize, i.settings.maxScrollbarLength);\n  }\n  return thumbSize;\n}\n\nfunction updateCss(element, i) {\n  const xRailOffset = { width: i.railXWidth };\n  const roundedScrollTop = Math.floor(element.scrollTop);\n\n  if (i.isRtl) {\n    xRailOffset.left =\n      i.negativeScrollAdjustment +\n      element.scrollLeft +\n      i.containerWidth -\n      i.contentWidth;\n  } else {\n    xRailOffset.left = element.scrollLeft;\n  }\n  if (i.isScrollbarXUsingBottom) {\n    xRailOffset.bottom = i.scrollbarXBottom - roundedScrollTop;\n  } else {\n    xRailOffset.top = i.scrollbarXTop + roundedScrollTop;\n  }\n  CSS.set(i.scrollbarXRail, xRailOffset);\n\n  const yRailOffset = { top: roundedScrollTop, height: i.railYHeight };\n  if (i.isScrollbarYUsingRight) {\n    if (i.isRtl) {\n      yRailOffset.right =\n        i.contentWidth -\n        (i.negativeScrollAdjustment + element.scrollLeft) -\n        i.scrollbarYRight -\n        i.scrollbarYOuterWidth -\n        9;\n    } else {\n      yRailOffset.right = i.scrollbarYRight - element.scrollLeft;\n    }\n  } else {\n    if (i.isRtl) {\n      yRailOffset.left =\n        i.negativeScrollAdjustment +\n        element.scrollLeft +\n        i.containerWidth * 2 -\n        i.contentWidth -\n        i.scrollbarYLeft -\n        i.scrollbarYOuterWidth;\n    } else {\n      yRailOffset.left = i.scrollbarYLeft + element.scrollLeft;\n    }\n  }\n  CSS.set(i.scrollbarYRail, yRailOffset);\n\n  CSS.set(i.scrollbarX, {\n    left: i.scrollbarXLeft,\n    width: i.scrollbarXWidth - i.railBorderXWidth,\n  });\n  CSS.set(i.scrollbarY, {\n    top: i.scrollbarYTop,\n    height: i.scrollbarYHeight - i.railBorderYWidth,\n  });\n}\n","import updateGeometry from '../update-geometry';\n\nexport default function(i) {\n  const element = i.element;\n\n  i.event.bind(i.scrollbarY, 'mousedown', e => e.stopPropagation());\n  i.event.bind(i.scrollbarYRail, 'mousedown', e => {\n    const positionTop =\n      e.pageY -\n      window.pageYOffset -\n      i.scrollbarYRail.getBoundingClientRect().top;\n    const direction = positionTop > i.scrollbarYTop ? 1 : -1;\n\n    i.element.scrollTop += direction * i.containerHeight;\n    updateGeometry(i);\n\n    e.stopPropagation();\n  });\n\n  i.event.bind(i.scrollbarX, 'mousedown', e => e.stopPropagation());\n  i.event.bind(i.scrollbarXRail, 'mousedown', e => {\n    const positionLeft =\n      e.pageX -\n      window.pageXOffset -\n      i.scrollbarXRail.getBoundingClientRect().left;\n    const direction = positionLeft > i.scrollbarXLeft ? 1 : -1;\n\n    i.element.scrollLeft += direction * i.containerWidth;\n    updateGeometry(i);\n\n    e.stopPropagation();\n  });\n}\n","import * as CSS from '../lib/css';\nimport * as DOM from '../lib/dom';\nimport cls, {\n  addScrollingClass,\n  removeScrollingClass,\n} from '../lib/class-names';\nimport updateGeometry from '../update-geometry';\nimport { toInt } from '../lib/util';\n\nexport default function(i) {\n  bindMouseScrollHandler(i, [\n    'containerWidth',\n    'contentWidth',\n    'pageX',\n    'railXWidth',\n    'scrollbarX',\n    'scrollbarXWidth',\n    'scrollLeft',\n    'x',\n    'scrollbarXRail',\n  ]);\n  bindMouseScrollHandler(i, [\n    'containerHeight',\n    'contentHeight',\n    'pageY',\n    'railYHeight',\n    'scrollbarY',\n    'scrollbarYHeight',\n    'scrollTop',\n    'y',\n    'scrollbarYRail',\n  ]);\n}\n\nfunction bindMouseScrollHandler(\n  i,\n  [\n    containerHeight,\n    contentHeight,\n    pageY,\n    railYHeight,\n    scrollbarY,\n    scrollbarYHeight,\n    scrollTop,\n    y,\n    scrollbarYRail,\n  ]\n) {\n  const element = i.element;\n\n  let startingScrollTop = null;\n  let startingMousePageY = null;\n  let scrollBy = null;\n\n  function mouseMoveHandler(e) {\n    if (e.touches && e.touches[0]) {\n      e[pageY] = e.touches[0].pageY;\n    }\n    element[scrollTop] =\n      startingScrollTop + scrollBy * (e[pageY] - startingMousePageY);\n    addScrollingClass(i, y);\n    updateGeometry(i);\n\n    e.stopPropagation();\n    e.preventDefault();\n  }\n\n  function mouseUpHandler() {\n    removeScrollingClass(i, y);\n    i[scrollbarYRail].classList.remove(cls.state.clicking);\n    i.event.unbind(i.ownerDocument, 'mousemove', mouseMoveHandler);\n  }\n\n  function bindMoves(e, touchMode) {\n    startingScrollTop = element[scrollTop];\n    if (touchMode && e.touches) {\n      e[pageY] = e.touches[0].pageY;\n    }\n    startingMousePageY = e[pageY];\n    scrollBy =\n      (i[contentHeight] - i[containerHeight]) /\n      (i[railYHeight] - i[scrollbarYHeight]);\n    if (!touchMode) {\n      i.event.bind(i.ownerDocument, 'mousemove', mouseMoveHandler);\n      i.event.once(i.ownerDocument, 'mouseup', mouseUpHandler);\n      e.preventDefault();\n    } else {\n      i.event.bind(i.ownerDocument, 'touchmove', mouseMoveHandler);\n    }\n\n    i[scrollbarYRail].classList.add(cls.state.clicking);\n\n    e.stopPropagation();\n  }\n\n  i.event.bind(i[scrollbarY], 'mousedown', e => {\n    bindMoves(e);\n  });\n  i.event.bind(i[scrollbarY], 'touchstart', e => {\n    bindMoves(e, true);\n  });\n}\n","import * as DOM from '../lib/dom';\nimport updateGeometry from '../update-geometry';\nimport { isEditable } from '../lib/util';\n\nexport default function(i) {\n  const element = i.element;\n\n  const elementHovered = () => DOM.matches(element, ':hover');\n  const scrollbarFocused = () =>\n    DOM.matches(i.scrollbarX, ':focus') || DOM.matches(i.scrollbarY, ':focus');\n\n  function shouldPreventDefault(deltaX, deltaY) {\n    const scrollTop = Math.floor(element.scrollTop);\n    if (deltaX === 0) {\n      if (!i.scrollbarYActive) {\n        return false;\n      }\n      if (\n        (scrollTop === 0 && deltaY > 0) ||\n        (scrollTop >= i.contentHeight - i.containerHeight && deltaY < 0)\n      ) {\n        return !i.settings.wheelPropagation;\n      }\n    }\n\n    const scrollLeft = element.scrollLeft;\n    if (deltaY === 0) {\n      if (!i.scrollbarXActive) {\n        return false;\n      }\n      if (\n        (scrollLeft === 0 && deltaX < 0) ||\n        (scrollLeft >= i.contentWidth - i.containerWidth && deltaX > 0)\n      ) {\n        return !i.settings.wheelPropagation;\n      }\n    }\n    return true;\n  }\n\n  i.event.bind(i.ownerDocument, 'keydown', e => {\n    if (\n      (e.isDefaultPrevented && e.isDefaultPrevented()) ||\n      e.defaultPrevented\n    ) {\n      return;\n    }\n\n    if (!elementHovered() && !scrollbarFocused()) {\n      return;\n    }\n\n    let activeElement = document.activeElement\n      ? document.activeElement\n      : i.ownerDocument.activeElement;\n    if (activeElement) {\n      if (activeElement.tagName === 'IFRAME') {\n        activeElement = activeElement.contentDocument.activeElement;\n      } else {\n        // go deeper if element is a webcomponent\n        while (activeElement.shadowRoot) {\n          activeElement = activeElement.shadowRoot.activeElement;\n        }\n      }\n      if (isEditable(activeElement)) {\n        return;\n      }\n    }\n\n    let deltaX = 0;\n    let deltaY = 0;\n\n    switch (e.which) {\n      case 37: // left\n        if (e.metaKey) {\n          deltaX = -i.contentWidth;\n        } else if (e.altKey) {\n          deltaX = -i.containerWidth;\n        } else {\n          deltaX = -30;\n        }\n        break;\n      case 38: // up\n        if (e.metaKey) {\n          deltaY = i.contentHeight;\n        } else if (e.altKey) {\n          deltaY = i.containerHeight;\n        } else {\n          deltaY = 30;\n        }\n        break;\n      case 39: // right\n        if (e.metaKey) {\n          deltaX = i.contentWidth;\n        } else if (e.altKey) {\n          deltaX = i.containerWidth;\n        } else {\n          deltaX = 30;\n        }\n        break;\n      case 40: // down\n        if (e.metaKey) {\n          deltaY = -i.contentHeight;\n        } else if (e.altKey) {\n          deltaY = -i.containerHeight;\n        } else {\n          deltaY = -30;\n        }\n        break;\n      case 32: // space bar\n        if (e.shiftKey) {\n          deltaY = i.containerHeight;\n        } else {\n          deltaY = -i.containerHeight;\n        }\n        break;\n      case 33: // page up\n        deltaY = i.containerHeight;\n        break;\n      case 34: // page down\n        deltaY = -i.containerHeight;\n        break;\n      case 36: // home\n        deltaY = i.contentHeight;\n        break;\n      case 35: // end\n        deltaY = -i.contentHeight;\n        break;\n      default:\n        return;\n    }\n\n    if (i.settings.suppressScrollX && deltaX !== 0) {\n      return;\n    }\n    if (i.settings.suppressScrollY && deltaY !== 0) {\n      return;\n    }\n\n    element.scrollTop -= deltaY;\n    element.scrollLeft += deltaX;\n    updateGeometry(i);\n\n    if (shouldPreventDefault(deltaX, deltaY)) {\n      e.preventDefault();\n    }\n  });\n}\n","import * as CSS from '../lib/css';\nimport cls from '../lib/class-names';\nimport updateGeometry from '../update-geometry';\nimport { env } from '../lib/util';\n\nexport default function(i) {\n  const element = i.element;\n\n  let shouldPrevent = false;\n\n  function shouldPreventDefault(deltaX, deltaY) {\n    const roundedScrollTop = Math.floor(element.scrollTop);\n    const isTop = element.scrollTop === 0;\n    const isBottom =\n      roundedScrollTop + element.offsetHeight === element.scrollHeight;\n    const isLeft = element.scrollLeft === 0;\n    const isRight =\n      element.scrollLeft + element.offsetWidth === element.scrollWidth;\n\n    let hitsBound;\n\n    // pick axis with primary direction\n    if (Math.abs(deltaY) > Math.abs(deltaX)) {\n      hitsBound = isTop || isBottom;\n    } else {\n      hitsBound = isLeft || isRight;\n    }\n\n    return hitsBound ? !i.settings.wheelPropagation : true;\n  }\n\n  function getDeltaFromEvent(e) {\n    let deltaX = e.deltaX;\n    let deltaY = -1 * e.deltaY;\n\n    if (typeof deltaX === 'undefined' || typeof deltaY === 'undefined') {\n      // OS X Safari\n      deltaX = (-1 * e.wheelDeltaX) / 6;\n      deltaY = e.wheelDeltaY / 6;\n    }\n\n    if (e.deltaMode && e.deltaMode === 1) {\n      // Firefox in deltaMode 1: Line scrolling\n      deltaX *= 10;\n      deltaY *= 10;\n    }\n\n    if (deltaX !== deltaX && deltaY !== deltaY /* NaN checks */) {\n      // IE in some mouse drivers\n      deltaX = 0;\n      deltaY = e.wheelDelta;\n    }\n\n    if (e.shiftKey) {\n      // reverse axis with shift key\n      return [-deltaY, -deltaX];\n    }\n    return [deltaX, deltaY];\n  }\n\n  function shouldBeConsumedByChild(target, deltaX, deltaY) {\n    // FIXME: this is a workaround for <select> issue in FF and IE #571\n    if (!env.isWebKit && element.querySelector('select:focus')) {\n      return true;\n    }\n\n    if (!element.contains(target)) {\n      return false;\n    }\n\n    let cursor = target;\n\n    while (cursor && cursor !== element) {\n      if (cursor.classList.contains(cls.element.consuming)) {\n        return true;\n      }\n\n      const style = CSS.get(cursor);\n\n      // if deltaY && vertical scrollable\n      if (deltaY && style.overflowY.match(/(scroll|auto)/)) {\n        const maxScrollTop = cursor.scrollHeight - cursor.clientHeight;\n        if (maxScrollTop > 0) {\n          if (\n            (cursor.scrollTop > 0 && deltaY < 0) ||\n            (cursor.scrollTop < maxScrollTop && deltaY > 0)\n          ) {\n            return true;\n          }\n        }\n      }\n      // if deltaX && horizontal scrollable\n      if (deltaX && style.overflowX.match(/(scroll|auto)/)) {\n        const maxScrollLeft = cursor.scrollWidth - cursor.clientWidth;\n        if (maxScrollLeft > 0) {\n          if (\n            (cursor.scrollLeft > 0 && deltaX < 0) ||\n            (cursor.scrollLeft < maxScrollLeft && deltaX > 0)\n          ) {\n            return true;\n          }\n        }\n      }\n\n      cursor = cursor.parentNode;\n    }\n\n    return false;\n  }\n\n  function mousewheelHandler(e) {\n    const [deltaX, deltaY] = getDeltaFromEvent(e);\n\n    if (shouldBeConsumedByChild(e.target, deltaX, deltaY)) {\n      return;\n    }\n\n    let shouldPrevent = false;\n    if (!i.settings.useBothWheelAxes) {\n      // deltaX will only be used for horizontal scrolling and deltaY will\n      // only be used for vertical scrolling - this is the default\n      element.scrollTop -= deltaY * i.settings.wheelSpeed;\n      element.scrollLeft += deltaX * i.settings.wheelSpeed;\n    } else if (i.scrollbarYActive && !i.scrollbarXActive) {\n      // only vertical scrollbar is active and useBothWheelAxes option is\n      // active, so let's scroll vertical bar using both mouse wheel axes\n      if (deltaY) {\n        element.scrollTop -= deltaY * i.settings.wheelSpeed;\n      } else {\n        element.scrollTop += deltaX * i.settings.wheelSpeed;\n      }\n      shouldPrevent = true;\n    } else if (i.scrollbarXActive && !i.scrollbarYActive) {\n      // useBothWheelAxes and only horizontal bar is active, so use both\n      // wheel axes for horizontal bar\n      if (deltaX) {\n        element.scrollLeft += deltaX * i.settings.wheelSpeed;\n      } else {\n        element.scrollLeft -= deltaY * i.settings.wheelSpeed;\n      }\n      shouldPrevent = true;\n    }\n\n    updateGeometry(i);\n\n    shouldPrevent = shouldPrevent || shouldPreventDefault(deltaX, deltaY);\n    if (shouldPrevent && !e.ctrlKey) {\n      e.stopPropagation();\n      e.preventDefault();\n    }\n  }\n\n  if (typeof window.onwheel !== 'undefined') {\n    i.event.bind(element, 'wheel', mousewheelHandler);\n  } else if (typeof window.onmousewheel !== 'undefined') {\n    i.event.bind(element, 'mousewheel', mousewheelHandler);\n  }\n}\n","import updateGeometry from '../update-geometry';\nimport cls from '../lib/class-names';\nimport * as CSS from '../lib/css';\nimport { env } from '../lib/util';\n\nexport default function(i) {\n  if (!env.supportsTouch && !env.supportsIePointer) {\n    return;\n  }\n\n  const element = i.element;\n\n  function shouldPrevent(deltaX, deltaY) {\n    const scrollTop = Math.floor(element.scrollTop);\n    const scrollLeft = element.scrollLeft;\n    const magnitudeX = Math.abs(deltaX);\n    const magnitudeY = Math.abs(deltaY);\n\n    if (magnitudeY > magnitudeX) {\n      // user is perhaps trying to swipe up/down the page\n\n      if (\n        (deltaY < 0 && scrollTop === i.contentHeight - i.containerHeight) ||\n        (deltaY > 0 && scrollTop === 0)\n      ) {\n        // set prevent for mobile Chrome refresh\n        return window.scrollY === 0 && deltaY > 0 && env.isChrome;\n      }\n    } else if (magnitudeX > magnitudeY) {\n      // user is perhaps trying to swipe left/right across the page\n\n      if (\n        (deltaX < 0 && scrollLeft === i.contentWidth - i.containerWidth) ||\n        (deltaX > 0 && scrollLeft === 0)\n      ) {\n        return true;\n      }\n    }\n\n    return true;\n  }\n\n  function applyTouchMove(differenceX, differenceY) {\n    element.scrollTop -= differenceY;\n    element.scrollLeft -= differenceX;\n\n    updateGeometry(i);\n  }\n\n  let startOffset = {};\n  let startTime = 0;\n  let speed = {};\n  let easingLoop = null;\n\n  function getTouch(e) {\n    if (e.targetTouches) {\n      return e.targetTouches[0];\n    } else {\n      // Maybe IE pointer\n      return e;\n    }\n  }\n\n  function shouldHandle(e) {\n    if (e.pointerType && e.pointerType === 'pen' && e.buttons === 0) {\n      return false;\n    }\n    if (e.targetTouches && e.targetTouches.length === 1) {\n      return true;\n    }\n    if (\n      e.pointerType &&\n      e.pointerType !== 'mouse' &&\n      e.pointerType !== e.MSPOINTER_TYPE_MOUSE\n    ) {\n      return true;\n    }\n    return false;\n  }\n\n  function touchStart(e) {\n    if (!shouldHandle(e)) {\n      return;\n    }\n\n    const touch = getTouch(e);\n\n    startOffset.pageX = touch.pageX;\n    startOffset.pageY = touch.pageY;\n\n    startTime = new Date().getTime();\n\n    if (easingLoop !== null) {\n      clearInterval(easingLoop);\n    }\n  }\n\n  function shouldBeConsumedByChild(target, deltaX, deltaY) {\n    if (!element.contains(target)) {\n      return false;\n    }\n\n    let cursor = target;\n\n    while (cursor && cursor !== element) {\n      if (cursor.classList.contains(cls.element.consuming)) {\n        return true;\n      }\n\n      const style = CSS.get(cursor);\n\n      // if deltaY && vertical scrollable\n      if (deltaY && style.overflowY.match(/(scroll|auto)/)) {\n        const maxScrollTop = cursor.scrollHeight - cursor.clientHeight;\n        if (maxScrollTop > 0) {\n          if (\n            (cursor.scrollTop > 0 && deltaY < 0) ||\n            (cursor.scrollTop < maxScrollTop && deltaY > 0)\n          ) {\n            return true;\n          }\n        }\n      }\n      // if deltaX && horizontal scrollable\n      if (deltaX && style.overflowX.match(/(scroll|auto)/)) {\n        const maxScrollLeft = cursor.scrollWidth - cursor.clientWidth;\n        if (maxScrollLeft > 0) {\n          if (\n            (cursor.scrollLeft > 0 && deltaX < 0) ||\n            (cursor.scrollLeft < maxScrollLeft && deltaX > 0)\n          ) {\n            return true;\n          }\n        }\n      }\n\n      cursor = cursor.parentNode;\n    }\n\n    return false;\n  }\n\n  function touchMove(e) {\n    if (shouldHandle(e)) {\n      const touch = getTouch(e);\n\n      const currentOffset = { pageX: touch.pageX, pageY: touch.pageY };\n\n      const differenceX = currentOffset.pageX - startOffset.pageX;\n      const differenceY = currentOffset.pageY - startOffset.pageY;\n\n      if (shouldBeConsumedByChild(e.target, differenceX, differenceY)) {\n        return;\n      }\n\n      applyTouchMove(differenceX, differenceY);\n      startOffset = currentOffset;\n\n      const currentTime = new Date().getTime();\n\n      const timeGap = currentTime - startTime;\n      if (timeGap > 0) {\n        speed.x = differenceX / timeGap;\n        speed.y = differenceY / timeGap;\n        startTime = currentTime;\n      }\n\n      if (shouldPrevent(differenceX, differenceY)) {\n        e.preventDefault();\n      }\n    }\n  }\n  function touchEnd() {\n    if (i.settings.swipeEasing) {\n      clearInterval(easingLoop);\n      easingLoop = setInterval(function() {\n        if (i.isInitialized) {\n          clearInterval(easingLoop);\n          return;\n        }\n\n        if (!speed.x && !speed.y) {\n          clearInterval(easingLoop);\n          return;\n        }\n\n        if (Math.abs(speed.x) < 0.01 && Math.abs(speed.y) < 0.01) {\n          clearInterval(easingLoop);\n          return;\n        }\n\n        applyTouchMove(speed.x * 30, speed.y * 30);\n\n        speed.x *= 0.8;\n        speed.y *= 0.8;\n      }, 10);\n    }\n  }\n\n  if (env.supportsTouch) {\n    i.event.bind(element, 'touchstart', touchStart);\n    i.event.bind(element, 'touchmove', touchMove);\n    i.event.bind(element, 'touchend', touchEnd);\n  } else if (env.supportsIePointer) {\n    if (window.PointerEvent) {\n      i.event.bind(element, 'pointerdown', touchStart);\n      i.event.bind(element, 'pointermove', touchMove);\n      i.event.bind(element, 'pointerup', touchEnd);\n    } else if (window.MSPointerEvent) {\n      i.event.bind(element, 'MSPointerDown', touchStart);\n      i.event.bind(element, 'MSPointerMove', touchMove);\n      i.event.bind(element, 'MSPointerUp', touchEnd);\n    }\n  }\n}\n","import * as CSS from './lib/css';\nimport * as DOM from './lib/dom';\nimport cls from './lib/class-names';\nimport EventManager from './lib/event-manager';\nimport processScrollDiff from './process-scroll-diff';\nimport updateGeometry from './update-geometry';\nimport { toInt, outerWidth } from './lib/util';\n\nimport clickRail from './handlers/click-rail';\nimport dragThumb from './handlers/drag-thumb';\nimport keyboard from './handlers/keyboard';\nimport wheel from './handlers/mouse-wheel';\nimport touch from './handlers/touch';\n\nconst defaultSettings = () => ({\n  handlers: ['click-rail', 'drag-thumb', 'keyboard', 'wheel', 'touch'],\n  maxScrollbarLength: null,\n  minScrollbarLength: null,\n  scrollingThreshold: 1000,\n  scrollXMarginOffset: 0,\n  scrollYMarginOffset: 0,\n  suppressScrollX: false,\n  suppressScrollY: false,\n  swipeEasing: true,\n  useBothWheelAxes: false,\n  wheelPropagation: true,\n  wheelSpeed: 1,\n});\n\nconst handlers = {\n  'click-rail': clickRail,\n  'drag-thumb': dragThumb,\n  keyboard,\n  wheel,\n  touch,\n};\n\nexport default class PerfectScrollbar {\n  constructor(element, userSettings = {}) {\n    if (typeof element === 'string') {\n      element = document.querySelector(element);\n    }\n\n    if (!element || !element.nodeName) {\n      throw new Error('no element is specified to initialize PerfectScrollbar');\n    }\n\n    this.element = element;\n\n    element.classList.add(cls.main);\n\n    this.settings = defaultSettings();\n    for (const key in userSettings) {\n      this.settings[key] = userSettings[key];\n    }\n\n    this.containerWidth = null;\n    this.containerHeight = null;\n    this.contentWidth = null;\n    this.contentHeight = null;\n\n    const focus = () => element.classList.add(cls.state.focus);\n    const blur = () => element.classList.remove(cls.state.focus);\n\n    this.isRtl = CSS.get(element).direction === 'rtl';\n    if (this.isRtl === true) {\n      element.classList.add(cls.rtl);\n    }\n    this.isNegativeScroll = (() => {\n      const originalScrollLeft = element.scrollLeft;\n      let result = null;\n      element.scrollLeft = -1;\n      result = element.scrollLeft < 0;\n      element.scrollLeft = originalScrollLeft;\n      return result;\n    })();\n    this.negativeScrollAdjustment = this.isNegativeScroll\n      ? element.scrollWidth - element.clientWidth\n      : 0;\n    this.event = new EventManager();\n    this.ownerDocument = element.ownerDocument || document;\n\n    this.scrollbarXRail = DOM.div(cls.element.rail('x'));\n    element.appendChild(this.scrollbarXRail);\n    this.scrollbarX = DOM.div(cls.element.thumb('x'));\n    this.scrollbarXRail.appendChild(this.scrollbarX);\n    this.scrollbarX.setAttribute('tabindex', 0);\n    this.event.bind(this.scrollbarX, 'focus', focus);\n    this.event.bind(this.scrollbarX, 'blur', blur);\n    this.scrollbarXActive = null;\n    this.scrollbarXWidth = null;\n    this.scrollbarXLeft = null;\n    const railXStyle = CSS.get(this.scrollbarXRail);\n    this.scrollbarXBottom = parseInt(railXStyle.bottom, 10);\n    if (isNaN(this.scrollbarXBottom)) {\n      this.isScrollbarXUsingBottom = false;\n      this.scrollbarXTop = toInt(railXStyle.top);\n    } else {\n      this.isScrollbarXUsingBottom = true;\n    }\n    this.railBorderXWidth =\n      toInt(railXStyle.borderLeftWidth) + toInt(railXStyle.borderRightWidth);\n    // Set rail to display:block to calculate margins\n    CSS.set(this.scrollbarXRail, { display: 'block' });\n    this.railXMarginWidth =\n      toInt(railXStyle.marginLeft) + toInt(railXStyle.marginRight);\n    CSS.set(this.scrollbarXRail, { display: '' });\n    this.railXWidth = null;\n    this.railXRatio = null;\n\n    this.scrollbarYRail = DOM.div(cls.element.rail('y'));\n    element.appendChild(this.scrollbarYRail);\n    this.scrollbarY = DOM.div(cls.element.thumb('y'));\n    this.scrollbarYRail.appendChild(this.scrollbarY);\n    this.scrollbarY.setAttribute('tabindex', 0);\n    this.event.bind(this.scrollbarY, 'focus', focus);\n    this.event.bind(this.scrollbarY, 'blur', blur);\n    this.scrollbarYActive = null;\n    this.scrollbarYHeight = null;\n    this.scrollbarYTop = null;\n    const railYStyle = CSS.get(this.scrollbarYRail);\n    this.scrollbarYRight = parseInt(railYStyle.right, 10);\n    if (isNaN(this.scrollbarYRight)) {\n      this.isScrollbarYUsingRight = false;\n      this.scrollbarYLeft = toInt(railYStyle.left);\n    } else {\n      this.isScrollbarYUsingRight = true;\n    }\n    this.scrollbarYOuterWidth = this.isRtl ? outerWidth(this.scrollbarY) : null;\n    this.railBorderYWidth =\n      toInt(railYStyle.borderTopWidth) + toInt(railYStyle.borderBottomWidth);\n    CSS.set(this.scrollbarYRail, { display: 'block' });\n    this.railYMarginHeight =\n      toInt(railYStyle.marginTop) + toInt(railYStyle.marginBottom);\n    CSS.set(this.scrollbarYRail, { display: '' });\n    this.railYHeight = null;\n    this.railYRatio = null;\n\n    this.reach = {\n      x:\n        element.scrollLeft <= 0\n          ? 'start'\n          : element.scrollLeft >= this.contentWidth - this.containerWidth\n          ? 'end'\n          : null,\n      y:\n        element.scrollTop <= 0\n          ? 'start'\n          : element.scrollTop >= this.contentHeight - this.containerHeight\n          ? 'end'\n          : null,\n    };\n\n    this.isAlive = true;\n\n    this.settings.handlers.forEach(handlerName => handlers[handlerName](this));\n\n    this.lastScrollTop = Math.floor(element.scrollTop); // for onScroll only\n    this.lastScrollLeft = element.scrollLeft; // for onScroll only\n    this.event.bind(this.element, 'scroll', e => this.onScroll(e));\n    updateGeometry(this);\n  }\n\n  update() {\n    if (!this.isAlive) {\n      return;\n    }\n\n    // Recalcuate negative scrollLeft adjustment\n    this.negativeScrollAdjustment = this.isNegativeScroll\n      ? this.element.scrollWidth - this.element.clientWidth\n      : 0;\n\n    // Recalculate rail margins\n    CSS.set(this.scrollbarXRail, { display: 'block' });\n    CSS.set(this.scrollbarYRail, { display: 'block' });\n    this.railXMarginWidth =\n      toInt(CSS.get(this.scrollbarXRail).marginLeft) +\n      toInt(CSS.get(this.scrollbarXRail).marginRight);\n    this.railYMarginHeight =\n      toInt(CSS.get(this.scrollbarYRail).marginTop) +\n      toInt(CSS.get(this.scrollbarYRail).marginBottom);\n\n    // Hide scrollbars not to affect scrollWidth and scrollHeight\n    CSS.set(this.scrollbarXRail, { display: 'none' });\n    CSS.set(this.scrollbarYRail, { display: 'none' });\n\n    updateGeometry(this);\n\n    processScrollDiff(this, 'top', 0, false, true);\n    processScrollDiff(this, 'left', 0, false, true);\n\n    CSS.set(this.scrollbarXRail, { display: '' });\n    CSS.set(this.scrollbarYRail, { display: '' });\n  }\n\n  onScroll(e) {\n    if (!this.isAlive) {\n      return;\n    }\n\n    updateGeometry(this);\n    processScrollDiff(this, 'top', this.element.scrollTop - this.lastScrollTop);\n    processScrollDiff(\n      this,\n      'left',\n      this.element.scrollLeft - this.lastScrollLeft\n    );\n\n    this.lastScrollTop = Math.floor(this.element.scrollTop);\n    this.lastScrollLeft = this.element.scrollLeft;\n  }\n\n  destroy() {\n    if (!this.isAlive) {\n      return;\n    }\n\n    this.event.unbindAll();\n    DOM.remove(this.scrollbarX);\n    DOM.remove(this.scrollbarY);\n    DOM.remove(this.scrollbarXRail);\n    DOM.remove(this.scrollbarYRail);\n    this.removePsClasses();\n\n    // unset elements\n    this.element = null;\n    this.scrollbarX = null;\n    this.scrollbarY = null;\n    this.scrollbarXRail = null;\n    this.scrollbarYRail = null;\n\n    this.isAlive = false;\n  }\n\n  removePsClasses() {\n    this.element.className = this.element.className\n      .split(' ')\n      .filter(name => !name.match(/^ps([-_].+|)$/))\n      .join(' ');\n  }\n}\n","import PerfectScrollbar from \"perfect-scrollbar\";\r\n\r\nconst ps = new PerfectScrollbar(\"#cells\", {\r\n  wheelSpeed: 10,\r\n  wheelPropagation: true,\r\n});\r\n\r\nlet defaultProperties = {\r\n  \"font-family\": \"Noto Sans\",\r\n  \"font-size\": 14,\r\n  text: \"\",\r\n  bold: false,\r\n  italic: false,\r\n  underlined: false,\r\n  alignment: \"left\",\r\n  color: \"#444\",\r\n  bgcolor: \"#fff\",\r\n  formula: \"\",\r\n  upStream: [],\r\n  downStream: [],\r\n};\r\n\r\nfor (let i = 1; i <= 100; i++) {\r\n  let str = \"\";\r\n  let n = i;\r\n\r\n  while (n > 0) {\r\n    let rem = n % 26;\r\n    if (rem == 0) {\r\n      str = \"Z\" + str;\r\n      n = Math.floor(n / 26) - 1;\r\n    } else {\r\n      str = String.fromCharCode(rem - 1 + 65) + str;\r\n      n = Math.floor(n / 26);\r\n    }\r\n  }\r\n  $(\"#columns\").append(\r\n    `<div class=\"column-name column-${i}\" id=\"${str}\">${str}</div>`\r\n  );\r\n  $(\"#rows\").append(`<div class=\"row-name ${i}\">${i}</div>`);\r\n}\r\nlet cellData = [];\r\nlet sheets = {\r\n  Sheet1: {},\r\n};\r\nlet saved = true;\r\nlet selectedSheet = \"Sheet1\";\r\nlet totalSheets = 1;\r\nlet lastSheetAdded = 1;\r\nlet sheetSelectedForSomeAction;\r\nfor (let i = 1; i <= 100; i++) {\r\n  let row = $('<div class=\"cell-row\"></div>');\r\n  // let rowData = [];\r\n  for (let j = 1; j <= 100; j++) {\r\n    row.append(\r\n      `<div id=\"row-${i}-col-${j}\" class=\"input-cell\" contenteditable=\"false\"></div>`\r\n    );\r\n    // rowData.push({ ...defaultProperties });\r\n  }\r\n  $(\"#cells\").append(row);\r\n  // cellData.push(rowData);\r\n}\r\n\r\nfunction getRowColId(elem) {\r\n  const classArr = $(elem).attr(\"id\").split(\"-\");\r\n  const rowId = parseInt(classArr[1]);\r\n  const colId = parseInt(classArr[3]);\r\n  return [rowId, colId];\r\n}\r\n\r\nfunction grabAdjacentCells(elem) {\r\n  const classArr = $(elem).attr(\"id\").split(\"-\");\r\n  const rowId = parseInt(classArr[1]);\r\n  const colId = parseInt(classArr[3]);\r\n  // console.log(cellData[rowId - 1][colId - 1]);\r\n  let topCell = $(`#row-${rowId - 1}-col-${colId}`);\r\n  let bottomCell = $(`#row-${rowId + 1}-col-${colId}`);\r\n  let leftCell = $(`#row-${rowId}-col-${colId - 1}`);\r\n  let rightCell = $(`#row-${rowId}-col-${colId + 1}`);\r\n  return [topCell, rightCell, bottomCell, leftCell];\r\n}\r\n\r\n$(\".input-cell\").on(\"click\", function (e) {\r\n  // console.log($(this));\r\n  console.log(sheets);\r\n  const [topCell, rightCell, bottomCell, leftCell] = grabAdjacentCells(this);\r\n  // console.log(topCell.length);\r\n  // if (topCell.length) console.log(\"topcell exists\");\r\n  if ($(this).hasClass(\"selected\") && e.ctrlKey) {\r\n    // unselectCell(this, e, topCell, bottomCell, leftCell, rightCell);\r\n    return unselectCells(this, topCell, rightCell, bottomCell, leftCell);\r\n  } else {\r\n    selectCell(e, this, topCell, rightCell, bottomCell, leftCell);\r\n  }\r\n  // const [rowId, colId] = getRowColId(this);\r\n  // console.log(cellData[rowId - 1][colId - 1]);\r\n});\r\n\r\n$(\".input-cell\").dblclick(function (e) {\r\n  $(this).attr(\"contenteditable\", true);\r\n  $(this).focus();\r\n});\r\n\r\n$(\".input-cell\").blur(function (e) {\r\n  $(this).attr(\"contenteditable\", false);\r\n  updateCellData(\"text\", $(this).text());\r\n});\r\n\r\nfunction getSelectedBooleans(topCell, rightCell, bottomCell, leftCell) {\r\n  let topSelected, rightSelected, bottomSelected, leftSelected;\r\n  // console.log(e.ctrlKey);\r\n\r\n  if (topCell) {\r\n    topSelected = topCell.hasClass(\"selected\");\r\n  }\r\n\r\n  if (bottomCell) {\r\n    bottomSelected = bottomCell.hasClass(\"selected\");\r\n  }\r\n\r\n  if (rightCell) {\r\n    rightSelected = rightCell.hasClass(\"selected\");\r\n  }\r\n\r\n  if (leftCell) {\r\n    leftSelected = leftCell.hasClass(\"selected\");\r\n  }\r\n\r\n  return [topSelected, rightSelected, bottomSelected, leftSelected];\r\n}\r\n\r\nfunction selectCell(e, cell, topCell, rightCell, bottomCell, leftCell) {\r\n  if (e.ctrlKey) {\r\n    // if ($(cell).hasClass(\"selected\")) {\r\n    //   return unselectCells(cell, topCell, rightCell, bottomCell, leftCell);\r\n    // }\r\n\r\n    const [topSelected, rightSelected, bottomSelected, leftSelected] =\r\n      getSelectedBooleans(topCell, rightCell, bottomCell, leftCell);\r\n\r\n    if (topSelected) {\r\n      $(cell).addClass(\"top-selected\");\r\n      topCell.addClass(\"bottom-selected\");\r\n    }\r\n\r\n    if (rightSelected) {\r\n      $(cell).addClass(\"right-selected\");\r\n      rightCell.addClass(\"left-selected\");\r\n    }\r\n\r\n    if (bottomSelected) {\r\n      $(cell).addClass(\"bottom-selected\");\r\n      bottomCell.addClass(\"top-selected\");\r\n    }\r\n\r\n    if (leftSelected) {\r\n      $(cell).addClass(\"left-selected\");\r\n      leftCell.addClass(\"right-selected\");\r\n    }\r\n  } else {\r\n    $(\".input-cell.selected\").removeClass(\r\n      \"selected top-selected bottom-selected left-selected right-selected\"\r\n    );\r\n  }\r\n  $(cell).addClass(\"selected\");\r\n  changeHeader(getRowColId(cell));\r\n}\r\n\r\nfunction unselectCells(cell, topCell, rightCell, bottomCell, leftCell) {\r\n  const [topSelected, rightSelected, bottomSelected, leftSelected] =\r\n    getSelectedBooleans(topCell, rightCell, bottomCell, leftCell);\r\n  if (topSelected) {\r\n    topCell.removeClass(\"bottom-selected\");\r\n    $(cell).removeClass(\"top-selected\");\r\n  }\r\n\r\n  if (rightSelected) {\r\n    rightCell.removeClass(\"left-selected\");\r\n    $(cell).removeClass(\"right-selected\");\r\n  }\r\n\r\n  if (bottomSelected) {\r\n    bottomCell.removeClass(\"top-selected\");\r\n    $(cell).removeClass(\"bottom-selected\");\r\n  }\r\n\r\n  if (leftSelected) {\r\n    leftCell.removeClass(\"right-selected\");\r\n    $(cell).removeClass(\"left-selected\");\r\n  }\r\n\r\n  $(cell).removeClass(\"selected\");\r\n  $(cell).blur();\r\n}\r\nlet startCellSelected = false;\r\nlet startCell = {};\r\nlet endCell = {};\r\n$(\".input-cell\").mousemove(function (e) {\r\n  e.preventDefault();\r\n  if (e.buttons == 1) {\r\n    if (!startCellSelected) {\r\n      startCellSelected = true;\r\n      let [rowId, colId] = getRowColId(this);\r\n      startCell = { rowId, colId };\r\n      // console.log(\"sc \", startCell);\r\n      //\r\n    }\r\n  } else {\r\n    startCellSelected = false;\r\n  }\r\n});\r\n\r\n$(\".input-cell\").mouseenter(function (e) {\r\n  if (e.buttons == 1) {\r\n    let [rowId, colId] = getRowColId(this);\r\n    endCell = { rowId, colId };\r\n    // console.log(\"ec\", endCell);\r\n    selectBetweenCell(startCell, endCell);\r\n  }\r\n});\r\n\r\nfunction selectBetweenCell(start, end) {\r\n  $(\".input-cell.selected\").removeClass(\r\n    \"selected top-selected bottom-selected left-selected right-selected\"\r\n  );\r\n  // console.log(start, end);\r\n  for (\r\n    let i = Math.min(start.rowId, end.rowId);\r\n    i <= Math.max(start.rowId, end.rowId);\r\n    i++\r\n  ) {\r\n    for (\r\n      let j = Math.min(start.colId, end.colId);\r\n      j <= Math.max(start.colId, end.colId);\r\n      j++\r\n    ) {\r\n      const cell = $(`#row-${i}-col-${j}`)[0];\r\n      const [topCell, rightCell, bottomCell, leftCell] =\r\n        grabAdjacentCells(cell);\r\n\r\n      selectCell(\r\n        { ctrlKey: true },\r\n        cell,\r\n        topCell,\r\n        rightCell,\r\n        bottomCell,\r\n        leftCell\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nfunction changeHeader([rowId, colId]) {\r\n  if (\r\n    sheets[selectedSheet][rowId - 1] &&\r\n    sheets[selectedSheet][rowId - 1][colId - 1]\r\n  ) {\r\n    const {\r\n      alignment: data,\r\n      bold,\r\n      italic,\r\n      underlined,\r\n      ...rest\r\n    } = sheets[selectedSheet][rowId - 1][colId - 1];\r\n    $(\".alignment\").removeClass(\"selected\");\r\n    $(`.alignment[data-type=${data}]`).addClass(\"selected\");\r\n    setHeaderStyle(\"#bold\", bold);\r\n    setHeaderStyle(\"#italic\", italic);\r\n    setHeaderStyle(\"#underlined\", underlined);\r\n    $(\"#fill-color\").css(\"border-color\", rest.bgcolor);\r\n    $(\"#text-color\").css(\"border-color\", rest.color);\r\n    $(\"#font-family\").val(rest[\"font-family\"]);\r\n    $(\"#font-size\").val(rest[\"font-size\"]);\r\n    $(\"#font-family\").css(\"font-family\", rest[\"font-family\"]);\r\n  } else {\r\n    $(\".alignment\").removeClass(\"selected\");\r\n    $(`.alignment[data-type=left]`).addClass(\"selected\");\r\n    setHeaderStyle(\"#bold\", defaultProperties[\"bold\"]);\r\n    setHeaderStyle(\"#italic\", defaultProperties[\"italic\"]);\r\n    setHeaderStyle(\"#underlined\", defaultProperties[\"underlined\"]);\r\n    $(\"#fill-color\").css(\"border-color\", defaultProperties[\"bgcolor\"]);\r\n    $(\"#text-color\").css(\"border-color\", defaultProperties[\"color\"]);\r\n    $(\"#font-family\").val(defaultProperties[\"font-family\"]);\r\n    $(\"#font-size\").val(defaultProperties[\"font-size\"]);\r\n    $(\"#font-family\").css(\"font-family\", defaultProperties[\"font-family\"]);\r\n  }\r\n}\r\n\r\nfunction setHeaderStyle(id, property) {\r\n  if (property) $(id).addClass(\"selected\");\r\n  else $(id).removeClass(\"selected\");\r\n}\r\n\r\n$(`.alignment`).click(function (e) {\r\n  $(\".alignment\").removeClass(\"selected\");\r\n  $(this).addClass(\"selected\");\r\n  let align = $(this).attr(\"data-type\");\r\n  $(\".input-cell.selected\").css(\"text-align\", align);\r\n  updateCellData(\"alignment\", align);\r\n});\r\n\r\n$(\"#bold\").click(function (e) {\r\n  if (!$(this).hasClass(\"selected\")) {\r\n    $(\".input-cell.selected\").css(\"font-weight\", \"bold\");\r\n    updateCellData(\"bold\", true);\r\n  } else {\r\n    $(\".input-cell.selected\").css(\"font-weight\", 400);\r\n    updateCellData(\"bold\", false);\r\n  }\r\n  $(this).toggleClass(\"selected\");\r\n});\r\n\r\n$(\"#italic\").click(function (e) {\r\n  if (!$(this).hasClass(\"selected\")) {\r\n    $(\".input-cell.selected\").css(\"font-style\", \"italic\");\r\n    updateCellData(\"italic\", true);\r\n  } else {\r\n    $(\".input-cell.selected\").css(\"font-style\", \"normal\");\r\n    updateCellData(\"italic\", false);\r\n  }\r\n  $(this).toggleClass(\"selected\");\r\n});\r\n\r\n$(\"#underlined\").click(function (e) {\r\n  if (!$(this).hasClass(\"selected\")) {\r\n    $(\".input-cell.selected\").css(\"text-decoration\", \"underline\");\r\n    updateCellData(\"underlined\", true);\r\n  } else {\r\n    $(\".input-cell.selected\").css(\"text-decoration\", \"none\");\r\n    updateCellData(\"underlined\", false);\r\n  }\r\n  $(this).toggleClass(\"selected\");\r\n});\r\n\r\n$(\"#cells\").scroll(function (e) {\r\n  $(\"#columns\").scrollLeft(this.scrollLeft);\r\n  $(\"#rows\").scrollTop(this.scrollTop);\r\n});\r\n// $(\".pick-color\").click(() => console.log(\"cliecked\"));\r\n$(\".pick-color\").colorPick({\r\n  initialColor: \"#abcd\",\r\n  allowRecent: true,\r\n  recentMax: 5,\r\n  allowCustomColor: false,\r\n  palette: [\r\n    \"#1abc9c\",\r\n    \"#16a085\",\r\n    \"#2ecc71\",\r\n    \"#27ae60\",\r\n    \"#3498db\",\r\n    \"#2980b9\",\r\n    \"#9b59b6\",\r\n    \"#8e44ad\",\r\n    \"#34495e\",\r\n    \"#2c3e50\",\r\n    \"#f1c40f\",\r\n    \"#f39c12\",\r\n    \"#e67e22\",\r\n    \"#d35400\",\r\n    \"#e74c3c\",\r\n    \"#c0392b\",\r\n    \"#ecf0f1\",\r\n    \"#bdc3c7\",\r\n    \"#95a5a6\",\r\n    \"#7f8c8d\",\r\n  ],\r\n  onColorSelected: function () {\r\n    // this.element.css({ backgroundColor: this.color, color: this.color });\r\n    if (this.color != \"#ABCD\") {\r\n      const id = $(this.element.children()[1]).attr(\"id\");\r\n      // console.log(id);\r\n      $(this.element.children()[1]).css(\"border-color\", this.color);\r\n      if (id == \"fill-color\") {\r\n        $(\".input-cell.selected\").css(\"background-color\", this.color);\r\n        updateCellData(\"bgcolor\", this.color);\r\n      } else {\r\n        $(\".input-cell.selected\").css(\"color\", this.color);\r\n        updateCellData(\"color\", this.color);\r\n      }\r\n    }\r\n\r\n    // console.log(this.element.children()[0]);\r\n  },\r\n});\r\n\r\n$(\".add-sheet\").click(function (e) {\r\n  totalSheets++;\r\n  lastSheetAdded++;\r\n  $(\".sheet-tab\").removeClass(\"selected\");\r\n  $(\".sheet-tab-container\").append(\r\n    `<div class=\"sheet-tab selected\">Sheet${lastSheetAdded}</div>`\r\n  );\r\n  sheets[$(\".sheet-tab.selected\").text()] = {};\r\n  addSheetListeners();\r\n  emptyPreviousSheet();\r\n  selectedSheet = $(\".sheet-tab.selected\").text();\r\n  $(\".sheet-tab.selected\")[0].scrollIntoView({ behaviour: \"smooth\" });\r\n  saved = false;\r\n});\r\n\r\nfunction addSheetListeners() {\r\n  $(\".sheet-tab.selected\").click(function (e) {\r\n    if ($(this).text() != selectedSheet) {\r\n      $(\".sheet-tab\").removeClass(\"selected\");\r\n      $(this).addClass(\"selected\");\r\n      emptyPreviousSheet();\r\n      selectedSheet = $(this).text();\r\n      $(\".sheet-tab\").removeClass(\"selected\");\r\n      $(this).addClass(\"selected\");\r\n      loadNewSheet();\r\n    }\r\n  });\r\n  $(\".sheet-tab.selected\").on(\"contextmenu\", function (e) {\r\n    e.preventDefault();\r\n    selectSheet(this);\r\n    $(\".sheet-options-modal\").remove();\r\n    $(\".container\").append(`<div class=\"sheet-options-modal\">\r\n    <div class=\"option sheet-rename\">Rename</div>\r\n    <div class=\"option sheet-delete\">Delete</div>\r\n  </div>`);\r\n    $(\".sheet-options-modal\").css({\r\n      left: e.pageX,\r\n    });\r\n    $(\".sheet-rename\").click(handleRenameSheet);\r\n    $(\".sheet-delete\").click(handleDeleteSheet);\r\n  });\r\n}\r\n\r\n$(\".sheet-tab\").on(\"contextmenu\", function (e) {\r\n  e.preventDefault();\r\n  console.log(\"clicked context\");\r\n  selectSheet(this);\r\n  $(\".sheet-options-modal\").remove();\r\n  $(\".container\").append(`<div class=\"sheet-options-modal\">\r\n  <div class=\"option sheet-rename\">Rename</div>\r\n  <div class=\"option sheet-delete\">Delete</div>\r\n</div>`);\r\n  $(\".sheet-options-modal\").css({\r\n    left: e.pageX,\r\n  });\r\n  $(\".sheet-rename\").click(handleRenameSheet);\r\n  $(\".sheet-delete\").click(handleDeleteSheet);\r\n});\r\n\r\nfunction selectSheet(elem) {\r\n  emptyPreviousSheet();\r\n  selectedSheet = $(elem).text();\r\n  $(\".sheet-tab\").removeClass(\"selected\");\r\n  $(elem).addClass(\"selected\");\r\n  loadNewSheet();\r\n}\r\n\r\n$(\".sheet-tab\").click(function (e) {\r\n  if ($(this).text() != selectedSheet) {\r\n    selectSheet(this);\r\n  }\r\n});\r\n\r\nfunction emptyPreviousSheet() {\r\n  let rowKeys = Object.keys(sheets[selectedSheet]);\r\n  // console.log(\"rowkeys\", rowKeys);\r\n  for (let i of rowKeys) {\r\n    let colKeys = Object.keys(sheets[selectedSheet][i]);\r\n    for (let j of colKeys) {\r\n      let cell = $(`#row-${parseInt(i) + 1}-col-${parseInt(j) + 1}`);\r\n      // console.log(cell);\r\n      cell.text(\"\");\r\n      cell.css({\r\n        \"font-family\": \"Noto Sans\",\r\n        \"font-size\": 14,\r\n        \"font-weight\": 400,\r\n        \"font-style\": \"none\",\r\n        \"text-decoration\": \"none\",\r\n        \"text-align\": \"left\",\r\n        color: \"#444\",\r\n        \"background-color\": \"#fff\",\r\n      });\r\n    }\r\n  }\r\n}\r\n\r\nfunction loadNewSheet() {\r\n  let rowKeys = Object.keys(sheets[selectedSheet]);\r\n  for (let i of rowKeys) {\r\n    let colKeys = Object.keys(sheets[selectedSheet][i]);\r\n    for (let j of colKeys) {\r\n      let cell = $(`#row-${parseInt(i) + 1}-col-${parseInt(j) + 1}`);\r\n      cell.text(sheets[selectedSheet][i][j][\"text\"]);\r\n      cell.css({\r\n        \"font-family\": sheets[selectedSheet][i][j][\"font-family\"],\r\n        \"font-size\": sheets[selectedSheet][i][j][\"font-size\"],\r\n        \"font-weight\": sheets[selectedSheet][i][j][\"bold\"] ? \"bold\" : 400,\r\n        \"font-style\": sheets[selectedSheet][i][j][\"italic\"] ? \"italic\" : \"none\",\r\n        \"text-decoration\": sheets[selectedSheet][i][j][\"underlined\"]\r\n          ? \"underline\"\r\n          : \"none\",\r\n        \"text-align\": sheets[selectedSheet][i][j][\"alignment\"],\r\n        color: sheets[selectedSheet][i][j][\"color\"],\r\n        \"background-color\": sheets[selectedSheet][i][j][\"bgcolor\"],\r\n      });\r\n    }\r\n  }\r\n}\r\n\r\nfunction handleRenameSheet(e) {\r\n  let modal = $(`<div class=\"sheet-modal-parent\">\r\n  <div class=\"sheet-rename-modal\">\r\n      <div class=\"sheet-modal-title\">Rename Sheet</div>\r\n      <div class=\"sheet-modal-input-container\">\r\n          <span class=\"sheet-modal-input-title\">Rename Sheet to:</span>\r\n          <input class=\"sheet-modal-input\" type=\"text\" />\r\n      </div>\r\n      <div class=\"sheet-modal-confirmation\">\r\n          <div class=\"button yes-button\">OK</div>\r\n          <div class=\"button no-button\">Cancel</div>\r\n      </div>\r\n  </div>\r\n</div>`);\r\n  $(\".container\").append(modal);\r\n  $(\".no-button\").click(function (e) {\r\n    $(\".sheet-modal-parent\").remove();\r\n  });\r\n  $(\".yes-button\").click(() => {\r\n    let val = $(\".sheet-modal-input\").val();\r\n    if (val && !Object.keys(sheets).includes(val)) {\r\n      sheets[val] = { ...sheets[selectedSheet] };\r\n      let copySheets = {};\r\n      Object.keys(sheets).forEach((sheet) => {\r\n        if (sheet != selectedSheet) {\r\n          copySheets[sheet] = { ...sheets[sheet] };\r\n        } else {\r\n          copySheets[val] = { ...sheets[sheet] };\r\n        }\r\n      });\r\n      $(\".sheet-tab\").each((index, elem) => {\r\n        if ($(elem).text() === selectedSheet) {\r\n          $(elem).text(val);\r\n        }\r\n      });\r\n      sheets = { ...copySheets };\r\n      selectedSheet = val;\r\n      saved = false;\r\n    } else {\r\n      $(\".rename-error\").remove();\r\n      $(\".sheet-modal-input-container\").append(\r\n        `<div class=\"rename-error\">Sheet already exists or please enter a value</div>`\r\n      );\r\n    }\r\n    $(\".sheet-modal-parent\").remove();\r\n  });\r\n}\r\n\r\n$(\".container\").click(function (e) {\r\n  $(\".sheet-options-modal\").remove();\r\n});\r\n\r\nfunction handleDeleteSheet(e) {\r\n  let modal = $(`<div class=\"sheet-modal-parent\">\r\n  <div class=\"sheet-delete-modal\">\r\n      <div class=\"sheet-modal-title\">Sheet Name</div>\r\n      <div class=\"sheet-modal-detail-container\">\r\n          <span class=\"sheet-modal-detail-title\">Are you sure?</span>\r\n      </div>\r\n      <div class=\"sheet-modal-confirmation\">\r\n          <div class=\"button yes-button\">\r\n              <div class=\"material-icons delete-icon\">delete</div>\r\n              Delete\r\n          </div>\r\n          <div class=\"button no-button\">Cancel</div>\r\n      </div>\r\n  </div>\r\n</div>`);\r\n  $(\".container\").append(modal);\r\n  $(\".no-button\").click(function (e) {\r\n    $(\".sheet-modal-parent\").remove();\r\n  });\r\n  $(\".yes-button\").click(function (e) {\r\n    let keys = Object.keys(sheets);\r\n    let deletedSheet = selectedSheet;\r\n    keys.forEach((sheet, index) => {\r\n      console.log(\"deleted\", deletedSheet);\r\n      if (sheet === deletedSheet) {\r\n        console.log(\"index\", index);\r\n        if (index == keys.length - 1) {\r\n          selectSheet($(\".sheet-tab\")[0]);\r\n        } else {\r\n          selectSheet($(\".sheet-tab\")[index + 1]);\r\n        }\r\n        delete sheets[deletedSheet];\r\n      }\r\n    });\r\n    $(\".sheet-tab\").each((idx, elem) => {\r\n      if ($(elem).text() === deletedSheet) {\r\n        $(elem).remove();\r\n      }\r\n    });\r\n    $(\".sheet-modal-parent\").remove();\r\n    totalSheets--;\r\n    saved = false;\r\n  });\r\n}\r\n\r\n$(\".left-scroller\").click(function (e) {\r\n  let keys = Object.keys(sheets);\r\n  let index = keys.indexOf(selectedSheet);\r\n  if (index != 0) {\r\n    selectSheet($(\".sheet-tab\")[index - 1]);\r\n    $(\".sheet-tab\")[index - 1].scrollIntoView({ behaviour: \"smooth\" });\r\n  }\r\n});\r\n\r\n$(\".right-scroller\").click(function (e) {\r\n  let keys = Object.keys(sheets);\r\n  let index = keys.indexOf(selectedSheet);\r\n  if (index != keys.length - 1) {\r\n    selectSheet($(\".sheet-tab\")[index + 1]);\r\n    $(\".sheet-tab\")[index + 1].scrollIntoView({ behaviour: \"smooth\" });\r\n  }\r\n});\r\n\r\n$(\".menu-selector\").change(function (e) {\r\n  const value = $(this).val();\r\n  const id = $(this).attr(\"id\");\r\n  if (id == \"font-family\") {\r\n    $(\".input-cell.selected\").css(\"font-family\", value);\r\n    updateCellData(\"font-family\", value);\r\n  } else {\r\n    const num = parseInt(value);\r\n    $(\".input-cell.selected\").css(\"font-size\", num);\r\n    updateCellData(\"font-size\", num);\r\n  }\r\n});\r\n\r\nfunction updateCellData(property, value) {\r\n  let oldCellData = JSON.stringify(sheets);\r\n  if (value != defaultProperties[property]) {\r\n    $(\".input-cell.selected\").each((idx, data) => {\r\n      let [rowId, colId] = getRowColId(data);\r\n      if (sheets[selectedSheet][rowId - 1] == undefined) {\r\n        sheets[selectedSheet][rowId - 1] = {};\r\n        sheets[selectedSheet][rowId - 1][colId - 1] = {\r\n          ...defaultProperties,\r\n          upStream: [],\r\n          downStream: [],\r\n        };\r\n        sheets[selectedSheet][rowId - 1][colId - 1][property] = value;\r\n      } else {\r\n        if (sheets[selectedSheet][rowId - 1][colId - 1] == undefined) {\r\n          sheets[selectedSheet][rowId - 1][colId - 1] = {\r\n            ...defaultProperties,\r\n            upStream: [],\r\n            downStream: [],\r\n          };\r\n          sheets[selectedSheet][rowId - 1][colId - 1][property] = value;\r\n        } else {\r\n          sheets[selectedSheet][rowId - 1][colId - 1][property] = value;\r\n        }\r\n      }\r\n    });\r\n  } else {\r\n    $(\".input-cell.selected\").each((idx, data) => {\r\n      let [rowId, colId] = getRowColId(data);\r\n      if (\r\n        sheets[selectedSheet][rowId - 1] &&\r\n        sheets[selectedSheet][rowId - 1][colId - 1]\r\n      ) {\r\n        sheets[selectedSheet][rowId - 1][colId - 1][property] = value;\r\n        if (\r\n          JSON.stringify(sheets[selectedSheet][rowId - 1][colId - 1]) ==\r\n          JSON.stringify(defaultProperties)\r\n        ) {\r\n          delete sheets[selectedSheet][rowId - 1][colId - 1];\r\n          if (Object.keys(sheets[selectedSheet][rowId - 1]).length == 0)\r\n            delete sheets[selectedSheet][rowId - 1];\r\n        }\r\n      }\r\n    });\r\n  }\r\n  if (oldCellData !== JSON.stringify(sheets)) {\r\n    saved = false;\r\n  }\r\n}\r\n\r\n$(\"#menu-file\").click(function (e) {\r\n  const fileModal = $(` \r\n  <div class=\"file-modal-parent\">\r\n  <div class=\"file-modal\">\r\n  <div class=\"file-options-modal\">\r\n      <div class=\"close\">\r\n          <div class=\"material-icons close-icon\">arrow_circle_down</div>\r\n          <div>Close</div>\r\n      </div>\r\n      <div class=\"new\">\r\n          <div class=\"material-icons new-icon\">insert_drive_file</div>\r\n          <div>New</div>\r\n      </div>\r\n      <div class=\"open\">\r\n          <div class=\"material-icons open-icon\">folder_open</div>\r\n          <div>Open</div>\r\n      </div>\r\n      <div class=\"save\">\r\n          <div class=\"material-icons save-icon\">save</div>\r\n          <div>Save</div>\r\n      </div>\r\n  </div>\r\n  <div class=\"file-recent-modal\"></div>\r\n</div></div>`);\r\n  $(\".container\").append(fileModal);\r\n  $(\".close\").click(function (e) {\r\n    console.log(\"clicked\");\r\n    $(\".file-modal-parent\").remove();\r\n  });\r\n\r\n  $(\".file-modal-parent\").click(function (e) {\r\n    $(this).remove();\r\n  });\r\n\r\n  $(\".file-modal\").click(function (e) {\r\n    e.preventDefault();\r\n    e.stopPropagation();\r\n    e.stopImmediatePropagation();\r\n  });\r\n\r\n  $(\".open\").click(function (e) {\r\n    openFile();\r\n    $(\".file-modal-parent\").remove();\r\n  });\r\n\r\n  $(\".new\").click(function (e) {\r\n    $(\".file-modal-parent\").remove();\r\n    if (!saved) {\r\n      const sureModal = $(`<div class=\"sheet-modal-parent\">\r\n       <div class=\"sheet-delete-modal\">\r\n           <div class=\"sheet-modal-title\">${$(\".title\").text()}</div>\r\n           <div class=\"sheet-modal-detail-container\">\r\n               <span class=\"sheet-modal-detail-title\">Do you want to save the unsaved changes?</span>\r\n           </div>\r\n           <div class=\"sheet-modal-confirmation\">\r\n               <div class=\"button yes-button\">\r\n                   Yes\r\n               </div>\r\n               <div class=\"button no-button\">No</div>\r\n           </div>\r\n       </div>\r\n     </div>`);\r\n      $(\".container\").append(sureModal);\r\n      $(\".yes-button\").click(function (e) {\r\n        $(\".sheet-modal-parent\").remove();\r\n        saveFile(true);\r\n      });\r\n      $(\".no-button\").click(function (e) {\r\n        $(\".sheet-modal-parent\").remove();\r\n        openNewFile();\r\n      });\r\n    } else {\r\n      openNewFile();\r\n    }\r\n  });\r\n\r\n  $(\".save\").click(function (e) {\r\n    $(\".file-modal-parent\").remove();\r\n    saveFile();\r\n  });\r\n});\r\n\r\nfunction openNewFile() {\r\n  emptyPreviousSheet();\r\n  selectedSheet = \"Sheet1\";\r\n  sheets = { Sheet1: {} };\r\n  totalSheets = 1;\r\n  lastSheetAdded = 1;\r\n  $(\".sheet-tab\").remove();\r\n  $(\".sheet-tab-container\").append(\r\n    `<div class=\"sheet-tab selected\">Sheet1</div>`\r\n  );\r\n  $(\".title\").text(\"Excel-Book\");\r\n  $(\"#row-1-col-1\").click();\r\n}\r\n\r\nfunction saveFile(newClicked) {\r\n  const saveModal = $(`<div class=\"sheet-modal-parent\">\r\n    <div class=\"sheet-rename-modal\">\r\n        <div class=\"sheet-modal-title\">Save File</div>\r\n        <div class=\"sheet-modal-input-container\">\r\n            <span class=\"sheet-modal-input-title\">Enter File Name:</span>\r\n            <input class=\"sheet-modal-input\" type=\"text\" />\r\n        </div>\r\n        <div class=\"sheet-modal-confirmation\">\r\n            <div class=\"button yes-button\">OK</div>\r\n            <div class=\"button no-button\">Cancel</div>\r\n        </div>\r\n    </div>\r\n  </div>`);\r\n  $(\".container\").append(saveModal);\r\n  $(\".no-button\").click(function (e) {\r\n    $(\".sheet-modal-parent\").remove();\r\n  });\r\n  $(\".yes-button\").click(function (e) {\r\n    $(\".title\").text($(\".sheet-modal-input\").val());\r\n    let a = document.createElement(\"a\");\r\n    a.href = `data:application/json,${encodeURIComponent(\r\n      JSON.stringify(sheets)\r\n    )}`;\r\n    console.log(a);\r\n    a.download = $(\".title\").text() + \".json\";\r\n    $(\".container\").append(a);\r\n    a.click();\r\n    a.remove();\r\n    saved = true;\r\n    $(\".sheet-modal-parent\").remove();\r\n    if (newClicked) {\r\n      openNewFile();\r\n    }\r\n  });\r\n}\r\n\r\nfunction openFile() {\r\n  let inputFile = $(`<input accept=\"application/json\" type=\"file\" />`);\r\n  $(\".container\").append(inputFile);\r\n  inputFile.click();\r\n  inputFile.change(function (e) {\r\n    let file = e.target.files[0];\r\n    $(\".title\").text(file.name.split(\".json\")[0]);\r\n    let reader = new FileReader();\r\n    reader.readAsText(file);\r\n    reader.onload = () => {\r\n      emptyPreviousSheet();\r\n      $(\".sheet-tab\").remove();\r\n      sheets = JSON.parse(reader.result);\r\n      console.log(sheets);\r\n      let keys = Object.keys(sheets);\r\n      lastlyAddedSheet = 1;\r\n      for (let i of keys) {\r\n        if (i.includes(\"Sheet\")) {\r\n          let splittedSheetArray = i.split(\"Sheet\");\r\n          if (splittedSheetArray.length == 2 && !isNaN(splittedSheetArray[1])) {\r\n            lastlyAddedSheet = parseInt(splittedSheetArray[1]);\r\n          }\r\n        }\r\n        $(\".sheet-tab-container\").append(\r\n          `<div class=\"sheet-tab selected\">${i}</div>`\r\n        );\r\n      }\r\n      addSheetListeners();\r\n      $(\".sheet-tab\").removeClass(\"selected\");\r\n      $($(\".sheet-tab\")[0]).addClass(\"selected\");\r\n      selectedSheet = keys[0];\r\n      totalSheets = keys.length;\r\n      loadNewSheet();\r\n      inputFile.remove();\r\n    };\r\n  });\r\n}\r\nlet clipBoard;\r\nlet contentCutted;\r\n$(\".copy,.cut\").click(function (e) {\r\n  if ($(this).text() === \"content_cut\") contentCutted = true;\r\n  clipBoard = { startCell: [], cellData: {} };\r\n  clipBoard.startCell = getRowColId($(\".input-cell.selected\")[0]);\r\n  let { cellData } = clipBoard;\r\n  $(\".input-cell.selected\").each((idx, elem) => {\r\n    let [row, col] = getRowColId(elem);\r\n    if (\r\n      sheets[selectedSheet][row - 1] &&\r\n      sheets[selectedSheet][row - 1][col - 1]\r\n    ) {\r\n      if (!cellData[row]) {\r\n        cellData[row] = {};\r\n      }\r\n      cellData[row][col] = { ...sheets[selectedSheet][row - 1][col - 1] };\r\n      if (contentCutted) {\r\n        delete sheets[selectedSheet][row - 1][col - 1];\r\n        if (Object.keys(sheets[selectedSheet][row - 1]).length == 0)\r\n          delete sheets[selectedSheet][row - 1];\r\n        let cell = $(`#row-${parseInt(row)}-col-${parseInt(col)}`);\r\n        cell.text(\"\");\r\n        cell.css({\r\n          \"font-family\": \"Noto Sans\",\r\n          \"font-size\": 14,\r\n          \"font-weight\": 400,\r\n          \"font-style\": \"none\",\r\n          \"text-decoration\": \"none\",\r\n          \"text-align\": \"left\",\r\n          color: \"#444\",\r\n          \"background-color\": \"#fff\",\r\n        });\r\n      }\r\n    }\r\n  });\r\n  console.log(clipBoard);\r\n});\r\n\r\n$(\".paste\").click(function (e) {\r\n  let sCell = getRowColId($(\".input-cell.selected\")[0]);\r\n  let { cellData } = clipBoard;\r\n  let rows = Object.keys(cellData);\r\n  console.log(rows);\r\n  for (i of rows) {\r\n    let cols = Object.keys(cellData[i]);\r\n    for (j of cols) {\r\n      let rowDiff = parseInt(i) - clipBoard.startCell[0];\r\n      let colDiff = parseInt(j) - clipBoard.startCell[1];\r\n      if (!sheets[selectedSheet][sCell[0] + rowDiff - 1]) {\r\n        sheets[selectedSheet][sCell[0] + rowDiff - 1] = {};\r\n      }\r\n      sheets[selectedSheet][sCell[0] + rowDiff - 1][sCell[1] + colDiff - 1] =\r\n        cellData[i][j];\r\n    }\r\n  }\r\n  loadNewSheet();\r\n  if (contentCutted) {\r\n    contentCutted = false;\r\n    clipBoard = { startCell: [], cellData: {} };\r\n  }\r\n});\r\n\r\n$(\"#formula-input\").blur(function (e) {\r\n  if ($(\".input-cell.selected\").length > 0) {\r\n    let formula = $(this).text();\r\n    // console.log($(this).val());\r\n    let splitArr = formula.split(\" \");\r\n    let elements = [];\r\n    for (let i of splitArr) {\r\n      if (i.length >= 2) {\r\n        i = i.replace(\"(\", \"\");\r\n        i = i.replace(\")\", \"\");\r\n        elements.push(i);\r\n      }\r\n    }\r\n    $(\".input-cell.selected\").each((index, elem) => {\r\n      if (updateStream(elem, elements)) {\r\n        console.log(\"passed\");\r\n      } else {\r\n        console.log(\"not\");\r\n      }\r\n    });\r\n    console.log(elements);\r\n  } else {\r\n    alert(\"!Please select a cell to apply the formula\");\r\n  }\r\n});\r\n\r\nfunction updateStream(elem, elements) {\r\n  let [rowId, colId] = getRowColId(elem);\r\n  let selfCode = $(`.column-${colId}`).attr(\"id\") + rowId;\r\n  if (elements.includes(selfCode)) {\r\n    return false;\r\n  }\r\n  return true;\r\n}\r\n\r\nconsole.log(\"hello parcel\");\r\n","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}